# Internationalization (i18n) Implementation

## Overview

The application supports internationalization using **Laravel as the single source of truth** for translations. Translations are passed to the frontend via Inertia shared data and loaded into react-i18next. This eliminates duplication and ensures consistency between backend and frontend.

## Features Implemented

- âœ… Laravel localization files in `lang/` directory (single source of truth)
- âœ… Translations passed via Inertia shared data
- âœ… react-i18next for client-side translation management
- âœ… Automatic locale detection from Laravel shared data
- âœ… English and Mongolian language support (proof of concept)
- âœ… Login page fully translated

## Project Structure

```
lang/
â”œâ”€â”€ en/
â”‚   â”œâ”€â”€ auth.php        # Authentication translations
â”‚   â””â”€â”€ common.php      # Common UI translations
â””â”€â”€ mn/
    â”œâ”€â”€ auth.php        # Mongolian auth translations
    â””â”€â”€ common.php      # Mongolian common translations

resources/js/
â”œâ”€â”€ i18n.ts             # i18next initialization (loads from shared data)
â””â”€â”€ utils/
    â””â”€â”€ locale.ts       # Locale switching utilities
```

## How It Works

1. **Laravel** stores all translations in `lang/{locale}/` PHP files
2. **HandleInertiaRequests** middleware loads translations and passes them via shared data
3. **app.tsx** receives translations and loads them into i18next using `loadTranslations()`
4. **React components** use `useTranslation()` hook to access translations

## Usage

### In React Components

```tsx
import { useTranslation } from 'react-i18next';

export default function MyComponent() {
    const { t } = useTranslation('auth'); // Specify namespace

    return (
        <div>
            <h1>{t('login.title')}</h1>
            <p>{t('login.description')}</p>
        </div>
    );
}
```

### Switching Languages

```tsx
import { switchLocale } from '@/utils/locale';

// Switch to Mongolian
await switchLocale('mn');

// Switch to English
await switchLocale('en');
```

### In Laravel Backend

```php
// In controllers or views
__('auth.login.title');

// With parameters
__('auth.throttle', ['seconds' => 60]);
```

## Adding New Languages

### 1. Create Laravel Translation Files

Create a new directory in `lang/` with the locale code:

```bash
mkdir lang/es
```

Create translation files:

```php
// lang/es/auth.php
<?php
return [
    'login' => [
        'title' => 'Iniciar sesiÃ³n en su cuenta',
        // ... more translations
    ],
];
```

That's it! The translations will automatically be available on the frontend via Inertia shared data.

## Translation Namespaces

The application uses namespaces to organize translations:

- **`auth`** - Authentication-related strings (login, register, passwords, etc.)
- **`common`** - Common UI elements (buttons, labels, messages)

## Current Implementation Status

### âœ… Completed
- Login page ([resources/js/pages/session/create.tsx](resources/js/pages/session/create.tsx))
- Backend locale sharing via Inertia
- react-i18next setup
- English and Mongolian translations
- Locale switching utilities

### ðŸ”„ Next Steps
To extend i18n to other pages:

1. Translate other auth pages (Register, Forgot Password, Reset Password)
2. Add translations to dashboard and main app layout
3. Create a language switcher component in the UI
4. Add user locale preference storage in database
5. Implement automatic locale detection from browser settings

## Testing

All existing tests pass with the i18n implementation:

```bash
php artisan test --filter=SessionControllerTest
```

## Build and Deployment

The i18n files are automatically included in the production build:

```bash
npm run build
```

## Best Practices

1. **Single source of truth** - All translations live in Laravel's `lang/` directory only
2. **Use namespaces** - Organize translations logically by feature/domain (auth, common, etc.)
3. **Test all languages** - Ensure UI doesn't break with longer translations
4. **Provide fallbacks** - Always have English as a fallback language
5. **Use Laravel helpers** - Use `__()` for backend, `t()` for frontend

## Example: Translating a New Page

```tsx
// Step 1: Import useTranslation hook
import { useTranslation } from 'react-i18next';

export default function Dashboard() {
    // Step 2: Get translation function
    const { t } = useTranslation('common');

    return (
        <div>
            {/* Step 3: Use t() function for all strings */}
            <h1>{t('welcome')}</h1>
            <button>{t('save')}</button>
        </div>
    );
}
```

## Resources

- [react-i18next Documentation](https://react.i18next.com/)
- [Laravel Localization Documentation](https://laravel.com/docs/localization)
- [i18next Documentation](https://www.i18next.com/)
